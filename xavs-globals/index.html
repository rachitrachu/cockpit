<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>xavs-globals</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header class="xd-header">
    <div class="xd-brand">XAVS</div>
    <div class="xd-subtitle">Globals & Hosts</div>
  </header>

  <main class="xd-main">
    <section class="xd-card">
      <!-- Tabs -->
      <div class="xd-actions">
        <button id="tab-services" class="xd-btn primary">Services</button>
        <button id="tab-hosts" class="xd-btn">Hosts Configuration</button>
      </div>

      <!-- tiny status for JS errors (shown only if something fails) -->
      <div id="js_status" class="xd-status" style="display:none"></div>

      <!-- SERVICES TAB -->
      <div id="pane-services">
        <h2>Services</h2>

        <!-- Networking first -->
        <h3>Networking</h3>
        <div class="xd-actions">
          <label for="network_interface">Management Interface *</label>
          <div class="xd-select-wrap">
            <select id="network_interface" class="xd-select"></select>
          </div>
        </div>
        <div class="xd-actions">
          <label for="neutron_external_interface">Neutron External Interface</label>
          <div class="xd-select-wrap">
            <select id="neutron_external_interface" class="xd-select"></select>
          </div>
        </div>
        <div class="xd-actions">
          <label for="kolla_internal_vip_address">Internal VIP Address *</label>
          <input id="kolla_internal_vip_address" class="xd-input" placeholder="e.g. 10.10.10.10">
        </div>
        <div class="xd-actions">
          <label for="kolla_external_vip_address">External VIP Address</label>
          <input id="kolla_external_vip_address" class="xd-input" placeholder="(optional) blank → use Internal VIP">
        </div>

        <div class="xd-actions">
          <label>Enable Neutron Provider Networks</label>
          <button id="btn_enable_neutron_provider_networks" class="xd-btn">No</button>
        </div>

        <!-- FQDNs -->
        <h3>FQDNs</h3>
        <div class="xd-actions">
          <label for="kolla_internal_fqdn">Internal FQDN</label>
          <input id="kolla_internal_fqdn" class="xd-input" placeholder="e.g. internal.example.local">
        </div>
        <div class="xd-actions">
          <label for="kolla_external_fqdn">External FQDN</label>
          <input id="kolla_external_fqdn" class="xd-input" placeholder="(optional) blank → use Internal FQDN">
        </div>

        <!-- Security -->
        <h3>Security</h3>
        <div class="xd-actions">
          <label>TLS (External)</label>
          <button id="btn_kolla_enable_tls_external" class="xd-btn">No</button>
        </div>
        <div class="xd-actions">
          <label for="kolla_external_fqdn_cert">External FQDN Certificate</label>
          <input id="kolla_external_fqdn_cert" class="xd-input" value="/etc/kolla/certificates/xloud.pem" placeholder="/etc/kolla/certificates/xloud.pem">
        </div>

        <!-- Observability & Logging -->
        <h3>Observability & Logging</h3>
        <div class="xd-actions">
          <label>Prometheus</label>
          <button id="btn_enable_prometheus" class="xd-btn">No</button>
        </div>
        <div class="xd-actions">
          <label>Grafana</label>
          <button id="btn_enable_grafana" class="xd-btn">No</button>
        </div>
        <div class="xd-actions">
          <label>Central Logging</label>
          <button id="btn_enable_central_logging" class="xd-btn">No</button>
        </div>

        <!-- Cinder -->
        <h3>Block Storage (Cinder)</h3>
        <div class="xd-actions">
          <label>Enable Cinder</label>
          <button id="btn_enable_cinder" class="xd-btn">No</button>
        </div>

        <div id="cinder_options" hidden>
          <div class="xd-actions">
            <label>Cinder Backend LVM</label>
            <button id="btn_enable_cinder_backend_lvm" class="xd-btn primary">Yes</button>
          </div>
          <div class="xd-actions">
            <label>Cinder Backend iSCSI</label>
            <button id="btn_enable_cinder_backend_iscsi" class="xd-btn">No</button>
          </div>
          <div class="xd-actions">
            <label for="cinder_volume_group">Cinder Volume Group</label>
            <input id="cinder_volume_group" class="xd-input" value="cloud-vg">
          </div>
        </div>

        <!-- Key Management -->
        <h3>Key Management</h3>
        <div class="xd-actions">
          <label>Barbican</label>
          <button id="btn_enable_barbican" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <button id="save" class="xd-btn primary">Save Globals</button>
          <span id="save_status" class="xd-status">No pending changes.</span>
        </div>

        <pre class="xd-pre mono" id="yaml_preview" hidden></pre>
      </div>

      <!-- HOSTS TAB -->
      <div id="pane-hosts" style="display:none">
        <h2>Hosts Configuration</h2>

        <div class="xd-actions">
          <label for="host_select">Host</label>
          <div class="xd-select-wrap">
            <select id="host_select" class="xd-select"></select>
          </div>
        </div>

        <h3>Per-Host Options</h3>

        <div class="xd-actions">
          <label>SR-IOV (Beta)</label>
          <button id="btn_host_sriov" class="xd-btn">No</button>
        </div>
        <div class="xd-actions">
          <label for="host_sriov_nic">SR-IOV NIC</label>
          <div class="xd-select-wrap">
            <select id="host_sriov_nic" class="xd-select"></select>
          </div>
        </div>

        <div class="xd-actions">
          <label>TPM</label>
          <button id="btn_host_tpm" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <label>PCI Passthrough (GPU/HBA)</label>
          <button id="btn_host_pci" class="xd-btn">No</button>
        </div>
        <div class="xd-actions">
          <label for="host_pci_dev">PCI Device</label>
          <div class="xd-select-wrap">
            <select id="host_pci_dev" class="xd-select"></select>
          </div>
        </div>

        <div class="xd-actions">
          <label>LUKS - Disk Encryption</label>
          <button id="btn_host_luks" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <label>Storage & Network QoS</label>
          <button id="btn_host_qos" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <label>CPU Masking (Live Migration)</label>
          <button id="btn_host_cpu_mask" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <label>Huge Pages</label>
          <button id="btn_host_huge" class="xd-btn">No</button>
        </div>

        <div class="xd-actions">
          <button id="save_hosts" class="xd-btn">Save Host Choices (local)</button>
          <span id="hosts_status" class="xd-status">Not persisted (used when saving globals).</span>
        </div>

        <pre class="xd-pre mono" id="hosts_preview" hidden></pre>
      </div>
    </section>
  </main>

  <!-- Cockpit provides this path at runtime -->
  <script src="cockpit.js"></script>
  <script src="app.js"></script>
</body>
</html>
