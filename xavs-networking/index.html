<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XAVS Network Management</title>
    <script src="../base1/cockpit.js"></script>
    <link rel="stylesheet" href="../xavs-images/xavs-images.css">
    <link rel="stylesheet" href="network-management.css">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
</head>
<body>
    <div class="app">
        <!-- Header -->
        <div class="topbar">
            <h1 class="app-title">
                <i class="fas fa-network-wired"></i>
                XAVS Network Management
            </h1>
            <div class="help" data-tip="Network Management Infrastructure using systemd-networkd with Netplan

Features:
• Configure network interfaces (static/DHCP)
• Manage VLANs and bridges
• Configure bonding and high availability
• Monitor network status and troubleshoot
• Version control and rollback capabilities
• Security and compliance management">?</div>
        </div>

        <!-- Navigation Tabs -->
        <ul class="nav-tabs">
            <li><a href="#interfaces" class="nav-link active" data-tab="interfaces">
                <i class="fas fa-ethernet"></i>Interfaces
            </a></li>
            <li><a href="#vlans" class="nav-link" data-tab="vlans">
                <i class="fas fa-sitemap"></i>VLANs
            </a></li>
            <li><a href="#bridges" class="nav-link" data-tab="bridges">
                <i class="fas fa-bridge"></i>Bridges
            </a></li>
            <li><a href="#bonds" class="nav-link" data-tab="bonds">
                <i class="fas fa-link"></i>Bonds
            </a></li>
            <li><a href="#routes" class="nav-link" data-tab="routes">
                <i class="fas fa-route"></i>Routes
            </a></li>
            <li><a href="#dns" class="nav-link" data-tab="dns">
                <i class="fas fa-server"></i>DNS
            </a></li>
            <li><a href="#logs" class="nav-link" data-tab="logs">
                <i class="fas fa-terminal"></i>Logs
            </a></li>
        </ul>

        <!-- Tab Content -->
        <div class="tab-content">
            <!-- Network Interfaces Tab -->
            <div id="interfaces" class="tab-pane show">
                <div class="tab-header">
                    <h2>Network Interface Management</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addInterface()">
                            <i class="fas fa-plus"></i> Add Interface
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshInterfaces()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <!-- Debug button removed for production -->
                    </div>
                </div>

                <div class="interface-controls">
                    <div class="form-group">
                        <label class="form-label">Filter by Type:</label>
                        <select class="form-control" id="interface-filter" onchange="filterInterfaces()">
                            <option value="all">All Interfaces</option>
                            <option value="ethernet">Ethernet</option>
                            <option value="vlan">VLAN</option>
                            <option value="bond">Bond</option>
                            <option value="bridge">Bridge</option>
                            <option value="virtual">Virtual</option>
                        </select>
                    </div>
                </div>

                <div class="interface-list" id="interface-list">
                    <!-- Dynamic interface list will be populated here -->
                </div>
            </div>

            <!-- VLANs Tab -->
            <div id="vlans" class="tab-pane">
                <div class="tab-header">
                    <h2>VLAN Configuration</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addVlan()">
                            <i class="fas fa-plus"></i> Add VLAN
                        </button>
                        <button class="btn btn-outline-secondary" onclick="cleanupNetplanConflicts()">
                            <i class="fas fa-broom"></i> Cleanup Conflicts
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshVlans()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <!-- Debug and emergency buttons removed for production -->
                    </div>
                </div>

                <div class="vlan-list" id="vlan-list">
                    <!-- Dynamic VLAN list will be populated here -->
                </div>
            </div>

            <!-- Bridges Tab -->
            <div id="bridges" class="tab-pane">
                <div class="tab-header">
                    <h2>Bridge Configuration</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addBridge()">
                            <i class="fas fa-plus"></i> Add Bridge
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshBridges()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                    </div>
                </div>

                <div class="bridge-list" id="bridge-list">
                    <!-- Dynamic bridge list will be populated here -->
                </div>
            </div>

            <!-- Bonds Tab -->
            <div id="bonds" class="tab-pane">
                <div class="tab-header">
                    <h2>Bond/Aggregation Configuration</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addBond()">
                            <i class="fas fa-plus"></i> Add Bond
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshBonds()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <!-- Debug button removed for production -->
                    </div>
                </div>

                <div class="bond-list" id="bond-list">
                    <!-- Dynamic bond list will be populated here -->
                </div>
            </div>

            <!-- Routes Tab -->
            <div id="routes" class="tab-pane">
                <div class="tab-header">
                    <h2>Routing Configuration</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addRoute()">
                            <i class="fas fa-plus"></i> Add Route
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshRoutes()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <!-- Debug button removed for production -->
                    </div>
                </div>

                <div class="route-list" id="route-list">
                    <!-- Dynamic route list will be populated here -->
                </div>
            </div>

            <!-- DNS Tab -->
            <div id="dns" class="tab-pane">
                <div class="tab-header">
                    <h2>DNS Configuration</h2>
                    <div class="actions">
                        <button class="btn btn-brand" onclick="addDnsServer()">
                            <i class="fas fa-plus"></i> Add DNS Server
                        </button>
                        <button class="btn btn-outline-brand" onclick="refreshDns()">
                            <i class="fas fa-sync-alt"></i> Refresh
                        </button>
                        <!-- Debug button removed for production -->
                    </div>
                </div>

                <div class="dns-config" id="dns-config">
                    <!-- DNS configuration will be populated here -->
                </div>
            </div>

            <!-- Logs Tab -->
            <div id="logs" class="tab-pane">
                <div class="logs-container">
                    <div class="logs-header">
                        <h3><i class="fas fa-terminal"></i> Network Management Logs</h3>
                        <div class="logs-actions">
                            <button class="btn btn-outline-muted" id="btn-clear-log" type="button">
                                <i class="fas fa-trash"></i> Clear Log
                            </button>
                        </div>
                    </div>
                    <div class="logs-content">
                        <pre class="log-terminal" id="log"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Bar -->
        <div class="status-bar">
            <span id="status-text">Ready</span>
            <span class="status-actions">
                <a href="#" class="status-link" data-tab="logs">View Logs</a>
            </span>
        </div>
    </div>

    <!-- Modals will be dynamically created here -->
    <div id="modal-container"></div>

    <script src="network-management.js"></script>
            <script src="vlan-manager.js?v=1.37"></script>
    <script src="bridge-manager.js"></script>
    <script src="bond-manager.js"></script>
</body>
</html>
