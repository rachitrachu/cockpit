<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>XAVS Networking Module Test</title>
    <link rel="stylesheet" href="style.theme.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: var(--background);
            color: var(--text);
            font-family: system-ui, -apple-system, sans-serif;
            padding: 2rem;
            line-height: 1.5;
        }
        .test-section {
            margin-bottom: 3rem;
            padding: 2rem;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: var(--surface);
        }
        .test-section h2 {
            margin-top: 0;
            color: var(--brand, #197560);
        }
        .button-group {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
        }
    </style>
</head>
<body>
    <h1><i class="fas fa-network-wired"></i> XAVS Networking Module - Component Test</h1>
    
    <div class="test-section">
        <h2><i class="fas fa-mouse-pointer"></i> Button Components</h2>
        <div class="button-group">
            <button class="btn btn-brand">
                <i class="fas fa-plus"></i> Primary Action
            </button>
            <button class="btn btn-outline-brand">
                <i class="fas fa-edit"></i> Secondary Action
            </button>
            <button class="btn btn-outline-brand" disabled>
                <i class="fas fa-spinner fa-spin"></i> Disabled State
            </button>
        </div>
        
        <div class="button-group">
            <button class="btn btn-brand btn-sm">
                <i class="fas fa-save"></i> Small Button
            </button>
            <button class="btn btn-outline-brand btn-lg">
                <i class="fas fa-download"></i> Large Button
            </button>
        </div>
        
        <h3>Action Buttons (Network Interface Style)</h3>
        <div class="button-group" id="action-buttons-test">
            <!-- Action buttons will be added here by JavaScript -->
        </div>
        
        <h3>Modal Tests</h3>
        <div class="button-group">
            <button class="btn btn-brand" onclick="testModal()">
                <i class="fas fa-window-maximize"></i> Test Modal
            </button>
            <button class="btn btn-outline-brand" onclick="testIPConfigModal()">
                <i class="fas fa-network-wired"></i> Test IP Config Modal
            </button>
        </div>
    </div>

    <div class="test-section">
        <h2><i class="fas fa-edit"></i> Form Components</h2>
        <div class="form-group">
            <label for="test-input">Text Input:</label>
            <input type="text" id="test-input" placeholder="Enter network name" value="eth0">
        </div>
        
        <div class="form-group">
            <label for="test-select">Select Dropdown:</label>
            <select id="test-select">
                <option>DHCP</option>
                <option>Static</option>
                <option>Manual</option>
            </select>
        </div>
        
        <div class="form-group">
            <label for="test-textarea">Textarea:</label>
            <textarea id="test-textarea" placeholder="Network configuration...">network:
  version: 2
  ethernets:
    eth0:
      dhcp4: true</textarea>
        </div>
    </div>

    <div class="test-section">
        <h2><i class="fas fa-terminal"></i> Output Components</h2>
        <div class="output-container">$ ping -c 4 google.com
PING google.com (172.217.14.238) 56(84) bytes of data.
64 bytes from lga25s62-in-f14.1e100.net (172.217.14.238): icmp_seq=1 ttl=54 time=12.4 ms
64 bytes from lga25s62-in-f14.1e100.net (172.217.14.238): icmp_seq=2 ttl=54 time=11.9 ms
64 bytes from lga25s62-in-f14.1e100.net (172.217.14.238): icmp_seq=3 ttl=54 time=12.1 ms
64 bytes from lga25s62-in-f14.1e100.net (172.217.14.238): icmp_seq=4 ttl=54 time=12.0 ms

--- google.com ping statistics ---
4 packets transmitted, 4 received, 0% packet loss
time 3004ms
rtt min/avg/max/mdev = 11.928/12.100/12.412/0.179 ms</div>
    </div>

    <div class="test-section">
        <h2><i class="fas fa-list"></i> Interface List</h2>
        <div class="search-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Search interfaces...">
        </div>
        
        <div class="interface-list">
            <div class="interface-item active">
                <div class="interface-name">
                    <i class="fas fa-ethernet"></i>
                    eth0
                    <span class="interface-status up">UP</span>
                </div>
                <div class="interface-details">192.168.1.100/24 - Primary network interface</div>
            </div>
            <div class="interface-item">
                <div class="interface-name">
                    <i class="fas fa-wifi"></i>
                    wlan0
                    <span class="interface-status down">DOWN</span>
                </div>
                <div class="interface-details">No IP assigned - Wireless interface</div>
            </div>
            <div class="interface-item">
                <div class="interface-name">
                    <i class="fas fa-circle"></i>
                    lo
                    <span class="interface-status up">UP</span>
                </div>
                <div class="interface-details">127.0.0.1/8 - Loopback interface</div>
            </div>
        </div>
    </div>

    <div class="test-section">
        <h2><i class="fas fa-table"></i> Table Component</h2>
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th class="sortable">Interface <i class="fas fa-sort"></i></th>
                        <th class="sortable">Status <i class="fas fa-sort"></i></th>
                        <th>IP Address</th>
                        <th>Type</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><i class="fas fa-ethernet"></i> eth0</td>
                        <td><span class="badge up">UP</span></td>
                        <td>192.168.1.100/24</td>
                        <td>Ethernet</td>
                        <td>
                            <button class="btn btn-outline-brand btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td><i class="fas fa-wifi"></i> wlan0</td>
                        <td><span class="badge down">DOWN</span></td>
                        <td>-</td>
                        <td>Wireless</td>
                        <td>
                            <button class="btn btn-outline-brand btn-sm">
                                <i class="fas fa-edit"></i>
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>

    <script src="js/debug.js"></script>
    <script src="js/ui-utils.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/run.js"></script>
    <script src="js/command-utils.js"></script>
    <script src="js/interfaces.js"></script>
    <script src="js/constructs.js"></script>
    <script src="js/mock-cockpit.js"></script>
    <script>
        // Test button interactions
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                if (!btn.disabled) {
                    console.log('Button clicked:', btn.textContent.trim());
                    
                    // Visual feedback
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        btn.style.transform = '';
                    }, 150);
                }
            });
        });

        // Test interface selection
        document.querySelectorAll('.interface-item').forEach(item => {
            item.addEventListener('click', () => {
                document.querySelectorAll('.interface-item').forEach(i => i.classList.remove('active'));
                item.classList.add('active');
                console.log('Interface selected:', item.querySelector('.interface-name').textContent.trim());
            });
        });

        // Test search functionality
        const searchInput = document.querySelector('.search-input');
        if (searchInput) {
            searchInput.addEventListener('input', (e) => {
                console.log('Search term:', e.target.value);
            });
        }

        // Test modal functionality
        function testModal() {
            const modal = document.createElement('dialog');
            modal.className = 'test-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2><i class="fas fa-test-tube"></i> Test Modal</h2>
                    <p>This is a test modal to verify modal styling and functionality.</p>
                    <div class="warning-box">
                        <strong><i class="fas fa-exclamation-triangle"></i> Warning:</strong> This is a test warning box.
                    </div>
                    <div class="info-box">
                        <strong><i class="fas fa-info-circle"></i> Info:</strong> This is a test info box.
                    </div>
                    <div class="form-buttons">
                        <button type="button" class="btn" onclick="this.closest('dialog').close()">
                            <i class="fas fa-times"></i> Cancel
                        </button>
                        <button type="button" class="btn btn-brand" onclick="alert('Modal action executed!'); this.closest('dialog').close();">
                            <i class="fas fa-check"></i> OK
                        </button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            if (typeof window.setupModal === 'function') {
                window.setupModal(modal);
            }
            modal.showModal();
        }

        // Test IP configuration modal
        function testIPConfigModal() {
            const modal = document.createElement('dialog');
            modal.className = 'ip-config-modal';
            modal.innerHTML = `
                <div class="modal-content">
                    <h2><i class="fas fa-network-wired"></i> Set IP Address for eth0</h2>
                    <form>
                        <label>Current IPv4 Address
                            <input type="text" value="192.168.1.100/24" readonly class="readonly-input">
                        </label>
                        <label>New IPv4 Address/CIDR
                            <input type="text" placeholder="192.168.1.101/24" required>
                            <small>Use CIDR notation (e.g., 192.168.1.100/24)</small>
                        </label>
                        <label>Gateway (optional)
                            <input type="text" placeholder="192.168.1.1">
                            <small>Default gateway for this interface</small>
                        </label>
                        <label>DNS Servers (optional, comma separated)
                            <input type="text" placeholder="8.8.8.8,1.1.1.1">
                            <small>Comma separated list of DNS servers</small>
                        </label>
                        <div class="info-box">
                            <label style="display: flex; align-items: flex-start; gap: 0.5rem; margin: 0;">
                                <input type="checkbox" checked style="margin-top: 0.25rem;">
                                <div>
                                    <strong><i class="fas fa-save"></i> Persist configuration to netplan</strong>
                                    <small style="display: block; margin-top: 0.25rem;">
                                        When enabled, configuration survives reboots.
                                    </small>
                                </div>
                            </label>
                        </div>
                        <div class="warning-box">
                            <strong><i class="fas fa-exclamation-triangle"></i> Note:</strong> This will replace any existing IP configuration for this interface.
                        </div>
                        <div class="form-buttons">
                            <button type="button" class="btn" onclick="this.closest('dialog').close()">
                                <i class="fas fa-times"></i> Cancel
                            </button>
                            <button type="button" class="btn btn-brand" onclick="alert('IP configuration would be applied!'); this.closest('dialog').close();">
                                <i class="fas fa-bolt"></i> Apply Configuration
                            </button>
                        </div>
                    </form>
                </div>
            `;
            
            document.body.appendChild(modal);
            if (typeof window.setupModal === 'function') {
                window.setupModal(modal);
            }
            modal.showModal();
        }

        // Test action buttons
        function initializeActionButtons() {
            const container = document.getElementById('action-buttons-test');
            if (!container || typeof window.createActionButton !== 'function') return;

            console.log('Creating action buttons...');

            // Test different button types
            const upButton = window.createActionButton('Up', '<i class="fas fa-arrow-up"></i>', () => {
                alert('Interface would be brought UP');
            }, 'state-down');

            const downButton = window.createActionButton('Down', '<i class="fas fa-arrow-down"></i>', () => {
                alert('Interface would be brought DOWN');
            }, 'state-up');

            const ipButton = window.createActionButton('IP', '⚬', () => {
                testIPConfigModal();
            }, 'default');

            const editButton = window.createActionButton('Edit', '✎', () => {
                alert('Edit interface functionality');
            }, 'default');

            const deleteButton = window.createActionButton('Delete', '🗑', () => {
                if (confirm('Delete this interface?')) {
                    alert('Interface would be deleted');
                }
            }, 'default');

            container.appendChild(upButton);
            container.appendChild(downButton);
            container.appendChild(ipButton);
            container.appendChild(editButton);
            container.appendChild(deleteButton);

            console.log('Action buttons created successfully');
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                initializeActionButtons();
            }, 1000);
        });

        console.log('XAVS Networking Module Test Page Loaded Successfully!');
        console.log('All components initialized and interactive.');
        console.log('Available test functions: testModal(), testIPConfigModal()');
    </script>
</body>
</html>
